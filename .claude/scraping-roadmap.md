# スクレイピングロードマップ

全38法律・8,283条のデータ取得計画

## 📊 現状（2025-11-11時点）

- **Stage 1（原文取得）完了**: 198/8,283条（2.4%）
- **完成済み法律**:
  - 日本国憲法（103条）
  - 十七条憲法（17条）
  - マグナ・カルタ（63条）
  - 南極条約（14条）
  - AI基本法（1条）

---

## 🎯 5段階ロードマップ

### 📅 Phase 1: 日本現行法（六法）- 即座に実行可能

**対象**: 4,055条

| 法律       | 条文数 | e-Gov法令番号   | 状態      |
| ---------- | ------ | --------------- | --------- |
| 民法       | 1,050  | 129AC0000000089 | ⏳ 未取得 |
| 商法       | 851    | 132AC0000000048 | ⏳ 未取得 |
| 会社法     | 979    | 417AC0000000086 | ⏳ 未取得 |
| 刑法       | 264    | 140AC0000000045 | ⏳ 未取得 |
| 民事訴訟法 | 404    | 408AC0000000109 | ⏳ 未取得 |
| 刑事訴訟法 | 507    | 323AC0000000131 | ⏳ 未取得 |

**実行方法**:

```bash
npm run fetch:roppou
```

**所要時間**: 30分〜1時間

**期待効果**: Stage 1が 2.4% → **51.4%**（+49%）

**優先度**: ⭐⭐⭐⭐⭐ **最優先**

---

### 📅 Phase 2: 外国現行法 - 短期実装（1-2週間）

**対象**: 318条

**必要な作業**:

1. 新規スクリプト作成: `scripts/fetch-us-constitution.js`
2. 新規スクリプト作成: `scripts/fetch-german-law.js`
3. 新規スクリプト作成: `scripts/fetch-china-constitution.js`

| 法律         | 条文数 | データソース           | 難易度 |
| ------------ | ------ | ---------------------- | ------ |
| アメリカ憲法 | 34     | archives.gov           | ★☆☆☆☆  |
| ドイツ基本法 | 146    | gesetze-im-internet.de | ★★☆☆☆  |
| 中国憲法     | 138    | constituteproject.org  | ★★☆☆☆  |

**期待効果**: Stage 1が 51.4% → **55.2%**（+3.8%）

**優先度**: ⭐⭐⭐⭐

---

### 📅 Phase 3: 主要国際条約 - 中期実装（2-4週間）

**対象**: 約600条

**必要な作業**:

- 汎用スクリプト作成: `scripts/fetch-treaty.js`

**実装順序**:

1. オリンピック憲章（60条）- IOC公式
2. WHO憲章（82条）- WHO公式
3. 国連憲章（111条）- 外務省/国連
4. シカゴ条約（96条）- ICAO公式
5. 国連海洋法条約（320条）- 外務省

**データソース**:

- 外務省: https://www.mofa.go.jp/
- 国連条約DB: https://treaties.un.org/
- 各国際機関公式サイト

**期待効果**: Stage 1が 55.2% → **62.5%**（+7.3%）

**優先度**: ⭐⭐⭐⭐

---

### 📅 Phase 4: 歴史法・外国歴史法 - 中長期実装（1-2ヶ月）

**対象**: 約742条

#### 日本歴史法（192条）

**実装順序**:

1. 五箇条の御誓文（5条）- 手動入力
2. 武家諸法度（13条）- 半自動
3. 禁中並公家諸法度（17条）- 半自動
4. 大宝律令（30条）- スクレイピング
5. 御成敗式目（51条）- スクレイピング
6. 明治憲法（76条）- スクレイピング

**データソース**: 国立国会図書館デジタルコレクション

#### 外国歴史法（550条）

**実装順序**:

1. 権利章典（13条）- legislation.gov.uk
2. ハンムラビ法典（282条）- Yale Avalon Project
3. ワイマール憲法（181条）- documentarchiv.de
4. ローマ法大全（50条・抜粋）- 選定が必要

**期待効果**: Stage 1が 62.5% → **71.5%**（+9.0%）

**優先度**: ⭐⭐⭐

---

### 📅 Phase 5: 残りの条約・歴史法 - 長期プロジェクト（3-6ヶ月）

**対象**: 約2,781条

**最大の課題**:

- ナポレオン法典（2,281条）- 全体の27%を占める
- 多言語対応が必要（フランス語原文）

**その他の国際条約**:

- ラムサール条約（12条）
- NPT（11条）
- 宇宙条約（17条）
- 万国郵便条約（40条）
- メートル条約（18条）
- ITU憲章（59条）
- 日米犯罪人引渡条約（21条）
- その他

**期待効果**: Stage 1が 71.5% → **100%**（+28.5%）

**優先度**: ⭐⭐

---

## 🛠️ 技術的な実装方針

### ✅ 既に実装済み

- e-Gov API対応スクリプト（六法用）
- プロキシ対応
- リトライ機能
- エラーハンドリング
- 進捗管理システム

### 🔧 実装が必要

1. **HTMLスクレイピング基盤**
   - BeautifulSoup/Cheerio相当のライブラリ
   - DOM操作・CSS Selector対応

2. **多言語対応**
   - 英語・ドイツ語・フランス語のテキスト抽出
   - 文字エンコーディング処理

3. **PDF解析**（必要に応じて）
   - 一部の歴史法はPDFのみ提供
   - pdf-parse等のライブラリ

4. **汎用スクレイピングフレームワーク**
   - サイトごとに異なる構造に対応
   - 設定ファイルベースのスクレイパー

---

## 📈 進捗可視化

進捗は以下で確認可能：

1. **YAMLファイル**: `.claude/all-laws-progress.yaml`
2. **Webページ**: `/progress`（実装済み）
3. **CLI**: `npm run fetch:roppou` 実行時のログ

---

## 🚀 次のアクションアイテム

### 今すぐ実行できること

```bash
# ローカル環境で六法を一括取得
cd /home/d131/repos/2025/osaka-kenpo
npm run fetch:roppou
```

### 次に実装するスクリプト（優先順）

1. `scripts/fetch-us-constitution.js`（最も簡単）
2. `scripts/fetch-german-law.js`
3. `scripts/fetch-treaty.js`（汎用）
4. `scripts/fetch-historical-law.js`（日本歴史法用）

---

## 📝 注意事項

### データ取得時の礼儀

- **リクエスト間隔**: 最低1秒以上
- **User-Agent**: 適切に設定済み
- **robots.txt**: 遵守すること
- **利用規約**: 各サイトの規約を確認

### プロキシ設定

プロキシが必要な環境の場合：

```bash
export HTTPS_PROXY=http://proxy.example.com:8080
export HTTP_PROXY=http://proxy.example.com:8080
```

### エラー対応

- **タイムアウト**: リトライ機能で自動対応
- **API制限**: レート制限で自動調整
- **ネットワークエラー**: 個別に再実行可能

---

## 📊 最終目標

**全38法律・8,283条のStage 1（原文取得）を100%完成させる**

完成後：

- Stage 2: 原文解説作成
- Stage 3: 大阪弁訳作成
- Stage 4: 大阪弁解説作成

へと進む。
