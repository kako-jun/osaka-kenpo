# 法律追加手順書

## 概要
新しい法律をおおさかけんぽうに追加する際の手順書です。十七条憲法を追加した際の試行錯誤を元にまとめています。

## 1. データファイルの準備

### 1.1. 条文データの作成
各条文につき1つのJSONファイルを作成します。

**ファイル配置:**
```
src/data/laws/[category]/[law_name]/[article_number].json
```

**JSONフォーマット:**
```json
{
  "article": 1,
  "title": "原文のタイトル",
  "titleOsaka": "大阪弁のタイトル（オプション）",
  "original": "原文の条文内容",
  "osaka": "大阪弁翻訳の条文内容",
  "commentary": "解説文",
  "commentaryOsaka": "大阪弁の解説文（オプション）"
}
```

**カテゴリ例:**
- `jp`: 現行日本法
- `jp_old`: 歴史的日本法
- `foreign`: 外国現行法
- `foreign_old`: 歴史的外国法
- `treaty`: 条約・国際法

### 1.2. 法律メタデータの追加
`src/data/laws-metadata.json`に法律の基本情報を追加:

```json
{
  "laws": {
    "[law_id]": {
      "name": "法律名",
      "category": "カテゴリ",
      "totalArticles": 条文数,
      "description": "説明"
    }
  }
}
```

### 1.3. 出典情報の追加
`src/data/law-sources.json`に参考リンクと出典を追加:

```json
{
  "sources": {
    "[law_id]": {
      "name": "法律名",
      "source": "出典",
      "description": "詳細説明",
      "links": [
        {
          "text": "リンク名",
          "url": "URL"
        }
      ]
    }
  }
}
```

**注意点:**
- 古い法律にはe-Gov法令検索のリンクは含めない
- 国立国会図書館デジタルコレクションのリンクは正確なPIDを確認する
- 外国法の場合は原文の公式サイトへのリンクを含める

## 2. 法律名マッピングの更新

`src/lib/law-mappings.ts`に法律IDと表示名のマッピングを追加:

```typescript
export const lawMappings: Record<string, string> = {
  // 既存のマッピング...
  '[law_id]': '法律の表示名'
}
```

## 3. APIルートの確認

以下のAPIルートが自動で動作することを確認:
- `/api/[law_category]` - カテゴリ内法律一覧
- `/api/[law_category]/[law]` - 条文一覧 
- `/api/[law_category]/[law]/[article]` - 個別条文

通常は自動で動作しますが、特殊な構造の場合は調整が必要です。

## 4. 動的ルーティングの確認

以下のページが自動生成されることを確認:
- `/law/[law_category]` - カテゴリページ
- `/law/[law_category]/[law]` - 法律の条文一覧
- `/law/[law_category]/[law]/[article]` - 個別条文ページ

## 5. 翻訳作業のポイント

### 5.1. 大阪弁翻訳のトーン
- 「春日歩（大阪さん）」風の親しみやすい口調
- 関西弁の特徴：「〜やで」「〜しなはれ」「知らんけど」等
- 法律用語も分かりやすく言い換える

### 5.2. 翻訳例
```
原文: 「和をもって貴しとなす」
大阪弁: 「和を大切にしなはれ」

原文: 「篤く三宝を敬え」  
大阪弁: 「仏法僧をちゃんと敬いなはれや」
```

## 6. テスト項目

新しい法律を追加したら以下を確認:

### 6.1. 表示確認
- [ ] カテゴリページで法律が表示される
- [ ] 法律一覧ページで全条文が表示される
- [ ] 個別条文ページが正常に表示される
- [ ] 原文・大阪弁の切り替えが動作する

### 6.2. アニメーション確認
- [ ] 言語切り替え時にスムーズなフェードアニメーションが動作する
- [ ] スペースキーで切り替えできる
- [ ] ダブルクリック/タップで切り替えできる

### 6.3. UI確認
- [ ] タイトルが正しく表示される（HTMLタグが見えない）
- [ ] ナビゲーション（前の条文・次の条文）が動作する
- [ ] シェアボタンが正常に動作する
- [ ] 出典情報が正しく表示される
- [ ] モバイルでの表示が正常

### 6.4. 全体動作確認
- [ ] npm run dev で開発サーバーが正常起動する
- [ ] ビルドエラーが発生しない
- [ ] TypeScriptエラーが発生しない

## 7. よくある問題と対処法

### 7.1. アニメーション関連
**問題:** 切り替え時にHTMLタグが見える
**対処:** AnimatedContentのpropsを正しく分離する（originalContent/osakaContent）

**問題:** アニメーションが一瞬で切り替わる
**対処:** AnimatedContentコンポーネントのopacityとpositionの設定を確認

### 7.2. データ関連
**問題:** 条文が表示されない
**対処:** JSONファイルの形式とAPIレスポンス形式を確認

**問題:** 法律名が表示されない
**対処:** law-mappings.tsのマッピングを確認

### 7.3. リンク関連
**問題:** 参考リンクが不適切
**対処:** 古い法律はe-Govを除外、図書館リンクは正確なPIDを使用

## 8. 追加後のコミット

全ての確認が完了したら、以下のようなコミットメッセージでコミット:

```
feat: [法律名]の追加と大阪弁翻訳

- [法律名]の全[n]条を追加
- 各条文の大阪弁翻訳を実装
- 出典情報と参考リンクを追加
- 動的ルーティングとアニメーション対応

🤖 Generated with Claude Code

Co-Authored-By: Claude <noreply@anthropic.com>
```

## 9. 今後の改善点

- 翻訳の自動化スクリプトの作成
- バッチ処理での条文データ生成
- 翻訳品質の統一化
- テスト自動化の導入