# おおさかけんぽう - プロジェクト概要

## 📋 プロジェクト概要

**おおさかけんぽう**は、難解な法律条文を親しみやすい大阪弁（和歌山弁ベース）に翻訳して解説するWebサイトです。『あずまんが大王』の春日歩（大阪さん）が大人になって法律の先生になったという設定で、法律への心理的ハードルを下げ、多くの人が法律に気軽に親しめることを目的としています。

### 🎯 コンセプト

- **春日歩先生**: 『よつばと！』で先生になった春日歩が法律を教える設定
- **親しみやすさ**: 大阪弁での温かみのある解説
- **教育的価値**: 法律の本質を理解しやすく伝える

### 🎨 デザインテーマ

- **カラー**: 柔らかい赤系（#E94E77）をメインカラーに
- **フォント**: 原文は標準フォント、大阪弁は手書き風フォント
- **UI/UX**: モバイルファーストなレスポンシブデザイン

## 📂 ドキュメント構成

### 🛠️ 開発・設計ドキュメント（.claude/）

- **[law-addition-guide.md](.claude/law-addition-guide.md)** - 新しい法律追加の完全手順書
- **[animation-troubleshooting.md](.claude/animation-troubleshooting.md)** - アニメーション関連トラブルシューティング
- **[ui-consistency-checklist.md](.claude/ui-consistency-checklist.md)** - UI一貫性チェックリスト
- **[translation-style-guide.md](.claude/translation-style-guide.md)** - 大阪弁翻訳統合スタイルガイド（統合版）

### 📚 ユーザー・貢献者向けドキュメント

- **[README.md](README.md)** - プロジェクト概要とユーザーガイド
- **[CONTRIBUTING.md](CONTRIBUTING.md)** - 貢献者向けガイドライン
- **[docs/user-guide.md](docs/user-guide.md)** - 詳細な使い方ガイド

## 🚀 現在の状況（2025-11-11時点）

### ✅ 完了している法律（Stage 1）

- **日本国憲法**: 103条（Stage 4まで完成）
- **日本現行法（六法）**: 民法1,360条、商法457条、会社法1,152条、刑法356条、民訴540条、刑訴815条
- **外国現行法**: アメリカ憲法34条、ドイツ基本法198条、中国憲法143条
- **日本歴史法**: 十七条憲法17条
- **外国歴史法**: マグナ・カルタ63条
- **国際条約**: 南極条約14条

### 📊 全体進捗

- **法律数**: 38法律
- **総条文数**: 8,283条
- **テンプレート生成**: ✅完了（全条文）
- **Stage 1（原文）**: 5,253/8,283条（**63.4%**）✨
- **Stage 2（解説）**: 103/8,283条（1.2%）
- **Stage 3（大阪弁訳）**: 103/8,283条（1.2%）
- **Stage 4（大阪弁解説）**: 103/8,283条（1.2%）

### ⚠️ 既知の問題（2025-11-17発見）

**民法の原文取得漏れ（57条）**

e-Gov APIからの取得スクリプトに不具合があり、以下の57条の原文が未入力（`【ここに原文を入力してください】`のまま）：

- **第39-84条**: 46条分の連続欠落
- **第156-157条**: 2条
- **第171-174条**: 4条
- **その他**: 368条、517条、535条、639条、640条（5条）

**対応方針**:
1. e-Gov APIスクリプトを修正して欠落分を再取得
2. 再取得後、大阪弁訳も追加（現在57条が未訳）

**影響範囲**:
- 民法の実質完成度: 1,050条中993条完成（94.6%）
- Stage 1の実際の完成率に影響

### 🎯 次にやるべきこと

**Phase 3: 国際条約の原文取得**

1. **WHO憲章**: 82条
2. **国連憲章**: 111条
3. **国連海洋法条約**: 320条
4. **その他の条約・歴史法**: 約3,000条

**課題**: ネットワークアクセス不安定、PDF解析ツール導入検討中

詳細は → `.claude/scraping-roadmap.md` を参照

## 📋 六法整備プロジェクト（4段階戦略）- ✅ **完了**

### 🎯 整備対象（六法＋会社法）

- **憲法**: 103条（✅ Stage 4完成）
- **民法**: 1,360条（✅ Stage 1完成）
- **商法**: 457条（✅ Stage 1完成）
- **会社法**: 1,152条（✅ Stage 1完成）
- **刑法**: 356条（✅ Stage 1完成）
- **民事訴訟法**: 540条（✅ Stage 1完成）
- **刑事訴訟法**: 815条（✅ Stage 1完成）
- **合計**: 4,680条（計画4,158条・附則含む）

### 📊 4段階戦略

手作業は一切行わず、e-Gov法令検索APIから自動取得して段階的に整備：

1. **Stage 1**: 原文（originalText）← まず全条文でこれを完成
2. **Stage 2**: 原文解説（commentary）
3. **Stage 3**: 大阪弁訳（osakaText）
4. **Stage 4**: 大阪弁解説（commentaryOsaka）

### 🛠️ 自動化スクリプト（改善版）

#### 改善点

- ✅ プロキシ対応（環境変数 `HTTPS_PROXY`/`HTTP_PROXY` から自動取得）
- ✅ 適切なUser-Agent設定
- ✅ リトライ機能（最大3回）
- ✅ 詳細なエラーハンドリング
- ✅ レート制限（API負荷軽減）

#### 必要なパッケージのインストール

```bash
npm install
```

#### 使用方法

**六法を一括取得（推奨）:**

```bash
npm run fetch:roppou
```

**個別に取得:**

```bash
# 民法を取得
npm run fetch:law minpou 129AC0000000089

# 商法を取得（現行版）
npm run fetch:law shouhou 132AC0000000048

# 会社法を取得
npm run fetch:law kaisya_hou 417AC0000000086

# 刑法を取得
npm run fetch:law keihou 140AC0000000045

# 民事訴訟法を取得
npm run fetch:law minji_soshou_hou 408AC0000000109

# 刑事訴訟法を取得
npm run fetch:law keiji_soshou_hou 323AC0000000131
```

#### プロキシ設定（必要な場合）

```bash
# 環境変数でプロキシを設定
export HTTPS_PROXY=http://proxy.example.com:8080
export HTTP_PROXY=http://proxy.example.com:8080

# その後、スクリプトを実行
npm run fetch:roppou
```

#### スクリプトの動作

1. e-Gov法令検索APIから法令XMLを取得
2. XMLをパースして条文を抽出
3. 各条文をYAMLファイルとして保存（Stage 1のみ埋める）
4. `law_metadata.yaml`を自動生成
5. `.claude/all-laws-progress.yaml`の進捗を更新

### 📈 進捗管理

- **進捗ファイル**: `.claude/all-laws-progress.yaml`（全38法律を一元管理）
- 各法律の条文数と4段階ごとの完成数を記録
- `/progress` ページで可視化

### 🔗 e-Gov法令番号一覧

- 憲法: `321CONSTITUTION`
- 民法: `129AC0000000089`（明治29年法律第89号）
- 商法: `132AC0000000048`（明治32年法律第48号・現行版）
- 会社法: `417AC0000000086`（平成17年法律第86号・2005年独立）
- 刑法: `140AC0000000045`（明治40年法律第45号）
- 民事訴訟法: `409AC0000000109`（平成8年法律第109号）
- 刑事訴訟法: `323AC0000000131`（昭和23年法律第131号）

### 🚀 次のステップ（ローカル環境で実行）

**現状**: 全4,055条分のテンプレートYAMLが生成済み（原文は空）

**実施すべき作業**: ローカル環境でe-Gov APIスクリプトを実行し、全条文の原文を取得

```bash
# 民法（1,050条）を取得
node scripts/fetch-egov-law.js minpou 129AC0000000089

# 商法（851条）を取得
node scripts/fetch-egov-law.js shouhou 132AC0000000048

# 会社法（979条）を取得
node scripts/fetch-egov-law.js kaisya_hou 417AC0000000086

# 刑法（264条）を取得
node scripts/fetch-egov-law.js keihou 140AC0000000045

# 民事訴訟法（404条）を取得
node scripts/fetch-egov-law.js minji_soshou_hou 409AC0000000109

# 刑事訴訟法（507条）を取得
node scripts/fetch-egov-law.js keiji_soshou_hou 323AC0000000131
```

**完了後の確認**:

- `/progress` ページで進捗を確認
- Stage 1の完成率が100%になることを確認
- 各条文YAMLに原文が入っていることを確認

**注意事項**:

- e-Gov APIは外部ネットワークアクセスが必要
- Claude Code on the Web環境では実行不可
- 必ずローカル環境（自分のPC）で実行すること

## 📋 全法律プロジェクト（38法律・8,283条）

### 📦 法律カテゴリ別内訳

1. **日本現行法**（10法律・3,760条）
   - 六法+会社法: 4,158条（憲法103、民法1,050、商法851、会社法979、刑法264、民訴404、刑訴507）
   - その他: AI基本法1、墾田永年私財法1、生類憐みの令5

2. **日本歴史法**（6法律・209条）
   - 十七条憲法17、大宝律令30、御成敗式目51、武家諸法度13、禁中並公家諸法度17、五箇条の御誓文5、明治憲法76

3. **外国現行法**（3法律・318条）
   - ドイツ基本法146、米国憲法34、中国憲法138

4. **外国歴史法**（6法律・2,870条）
   - ハンムラビ法典282、マグナ・カルタ63、ローマ法大全50、権利章典13、ワイマール憲法181、ナポレオン法典2,281

5. **国際条約**（13法律・1,126条）
   - 南極条約14、ラムサール条約12、国連憲章111、NPT11、宇宙条約17、万国郵便条約40、オリンピック憲章60、本初子午線会議7、道路標識条約30、メートル条約18、ITU憲章59、海洋法条約320、シカゴ条約96、日米犯罪人引渡条約21、WHO憲章82

### 🛠️ データ取得戦略

- **e-Gov API**: 日本現行法（六法等）→ `scripts/fetch-egov-law.js`
- **公式サイト**: 歴史法・外国法・条約 → ローカル環境で手動fetch必要
- **進捗管理**: `.claude/all-laws-progress.yaml` で一元管理

## 🎯 次期開発予定

### 最優先（今すぐ）

1. **Stage 1完成**: 全8,283条の原文取得（現在2.4%）
   - 六法4,055条をe-Gov APIで取得
   - 歴史・外国法を各公式サイトから取得

### 短期（1-2週間）

1. **Stage 2開始**: 全条文の解説作成
2. **検索機能**: サイト内全文検索の基本実装
3. **SNS共有**: 条文画像生成・共有機能

### 中期（1-2ヶ月）

1. **Stage 3-4**: 大阪弁翻訳・解説作成
2. **比較機能**: 法律間比較・差分表示
3. **パフォーマンス最適化**: SSG拡張・速度向上

### 長期（3-6ヶ月）

1. **特殊ナビゲーション**: タイムマシン・ワールドツアーUI
2. **地方条例対応**: 日本地図UI・条例データベース連携
3. **AI要約機能**: 法律間の違い・歴史的背景の自動解説

## 💻 開発環境セットアップ

### 必要な環境

- Node.js 20以上
- npm

### セットアップ手順

```bash
# リポジトリをクローン
git clone https://github.com/kako-jun/osaka-kenpo.git
cd osaka-kenpo

# 依存関係をインストール
npm install

# 開発サーバーを起動
npm run dev
```

### コミット前の自動チェック

このプロジェクトでは、**husky + lint-staged**を使用してコミット前に自動的にlint/formatを実行します。

#### 仕組み

- **コミット時**: `git commit`を実行すると、変更されたファイルに対して自動的に：
  1. ESLintでコードチェック＆自動修正（`.js, .jsx, .ts, .tsx`）
  2. Prettierでフォーマット（`.js, .jsx, .ts, .tsx, .json, .css, .md`）
  3. 問題があればコミットを中断

#### 手動実行

```bash
# 全ファイルをフォーマット
npm run format

# フォーマットチェックのみ（修正しない）
npm run format:check

# ESLintで自動修正
npm run lint:fix

# 型チェック
npm run typecheck
```

#### 設定ファイル

- `.husky/pre-commit`: コミット前に実行されるフック
- `.prettierrc`: Prettierの設定
- `.prettierignore`: フォーマット対象外ファイル
- `package.json`の`lint-staged`: コミット時の実行内容

**注意**: YAMLファイル（法律データ）は人間が手で編集するため、Prettierの対象外としています。

## 🛠️ 技術スタック

- **フレームワーク**: Next.js 14 (App Router)
- **言語**: TypeScript
- **UI**: React + Tailwind CSS
- **データ**: 静的JSONファイル
- **翻訳**: LLM API（将来的に）
- **ホスティング**: Vercel（予定）
- **品質管理**: ESLint + Prettier + husky + lint-staged

## 🎓 教育的価値

### ターゲットユーザー

- 法律に苦手意識を持つ一般の人々
- 法律を学び始めた学生
- 大阪弁・関西弁が好きな人
- 歴史や国際比較に興味がある人

### 学習効果

- **理解促進**: 親しみやすい翻訳で法的概念を理解
- **興味喚起**: 歴史・国際比較で法律への関心を高める
- **継続学習**: 楽しいUI/UXでの学習継続支援

---

詳細な技術仕様・開発手順・貢献方法については、上記ドキュメントを参照してください。
